<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets\app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:19,&quot;tests&quot;:52,&quot;passes&quot;:52,&quot;pending&quot;:0,&quot;failures&quot;:0,&quot;start&quot;:&quot;2020-05-16T22:43:23.426Z&quot;,&quot;end&quot;:&quot;2020-05-16T22:43:31.002Z&quot;,&quot;duration&quot;:7576,&quot;testsRegistered&quot;:52,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;6f50dab5-d2e2-4c42-835e-4112347b79cc&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;6095ad61-5be4-4aee-ae00-dab9583cde39&quot;,&quot;title&quot;:&quot;Questions&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\morga\\Documents\\mean-stack-web-app\\server-side\\tests\\questions.js&quot;,&quot;file&quot;:&quot;\\server-side\\tests\\questions.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Questions \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//Before each test we empty the database\n       Question.deleteMany({}, (err) =&gt; {\n           done();\n       });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;afcbc079-1009-43ce-ab62-87bdc3de614c&quot;,&quot;parentUUID&quot;:&quot;6095ad61-5be4-4aee-ae00-dab9583cde39&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;4bb8d2af-2bc6-4143-8c0b-3f444cccc050&quot;,&quot;title&quot;:&quot;/GET questions&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\morga\\Documents\\mean-stack-web-app\\server-side\\tests\\questions.js&quot;,&quot;file&quot;:&quot;\\server-side\\tests\\questions.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET no question since there is none in the database&quot;,&quot;fullTitle&quot;:&quot;Questions /GET questions it should GET no question since there is none in the database&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:213,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n                \&quot;pseudo\&quot;: process.env[\&quot;ADMIN_PSEUDO\&quot;],\n                \&quot;password\&quot;: process.env[\&quot;ADMIN_PSD\&quot;]\n            };\n            chai.request(server)\n                .post(&#x27;/server/api/login&#x27;)\n                .send(user)\n                .end((err, res) =&gt; {\n                    chai.request(server)\n                        .get(`/server/api/questions`)\n                        .set(&#x27;Authorization&#x27;, res.body.token)\n                        .end((err, res) =&gt; {\n                            res.should.have.status(204);\n                            res.body.should.be.a(&#x27;object&#x27;);\n                            Object.keys(res.body).length.should.be.eql(0);\n                            done();\n                        });\n                });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c86c0f85-9fbf-47ae-989d-bf4a518b3f01&quot;,&quot;parentUUID&quot;:&quot;4bb8d2af-2bc6-4143-8c0b-3f444cccc050&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should get all questions&quot;,&quot;fullTitle&quot;:&quot;Questions /GET questions it should get all questions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:121,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n                \&quot;pseudo\&quot;: process.env[\&quot;ADMIN_PSEUDO\&quot;],\n                \&quot;password\&quot;: process.env[\&quot;ADMIN_PSD\&quot;]\n            };\n            const question = new Question({\n                \&quot;type\&quot;: \&quot;boolean\&quot;, \&quot;question\&quot;: \&quot;what&#x27;s 2000 - 150 ?\&quot;,\n                \&quot;answers\&quot;: [{\&quot;option\&quot;: \&quot;true\&quot;, \&quot;isCorrect\&quot;: true},\n                    {\&quot;option\&quot;: \&quot;false\&quot;, \&quot;isCorrect\&quot;: false}\n                ]\n            });\n            chai.request(server)\n                .post(&#x27;/server/api/login&#x27;)\n                .send(user)\n                .end((err, res1) =&gt; {\n                    chai.request(server)\n                        .post(&#x27;/server/api/questions&#x27;)\n                        .send(question)\n                        .set(&#x27;Authorization&#x27;, res1.body.token)\n                        .end(() =&gt; {\n                            chai.request(server)\n                                .get(&#x27;/server/api/questions&#x27;)\n                                .set(&#x27;Authorization&#x27;, res1.body.token)\n                                .end((err, res2) =&gt; {\n                                    res2.should.have.status(200);\n                                    res2.body.should.be.a(&#x27;array&#x27;);\n                                    res2.body.length.should.be.eql(1);\n                                });\n                        });\n                    done();\n                });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f4de3ae7-58bb-42b8-8f3f-d5a36e025e69&quot;,&quot;parentUUID&quot;:&quot;4bb8d2af-2bc6-4143-8c0b-3f444cccc050&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c86c0f85-9fbf-47ae-989d-bf4a518b3f01&quot;,&quot;f4de3ae7-58bb-42b8-8f3f-d5a36e025e69&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:334,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;c22232db-e03b-4332-9128-a7f110c0d08a&quot;,&quot;title&quot;:&quot;/POST questions&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\morga\\Documents\\mean-stack-web-app\\server-side\\tests\\questions.js&quot;,&quot;file&quot;:&quot;\\server-side\\tests\\questions.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should NOT POST a question without a type field&quot;,&quot;fullTitle&quot;:&quot;Questions /POST questions it should NOT POST a question without a type field&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:162,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n                \&quot;pseudo\&quot;: process.env[\&quot;ADMIN_PSEUDO\&quot;],\n                \&quot;password\&quot;: process.env[\&quot;ADMIN_PSD\&quot;]\n            };\n            const question = {\n                \&quot;question\&quot;: \&quot;what&#x27;s 2000 - 150 ?\&quot;,\n                \&quot;answers\&quot;: [{\&quot;option\&quot;: \&quot;true\&quot;, \&quot;isCorrect\&quot;: true},\n                    {\&quot;option\&quot;: \&quot;false\&quot;, \&quot;isCorrect\&quot;: false}\n                ]\n            };\n            chai.request(server)\n                .post(&#x27;/server/api/login&#x27;)\n                .send(user)\n                .end((err, res) =&gt; {\n                    chai.request(server)\n                        .post(&#x27;/server/api/questions&#x27;)\n                        .send(question)\n                        .set(&#x27;Authorization&#x27;, res.body.token)\n                        .end((err, res) =&gt; {\n                            res.should.have.status(405);\n                            res.body.should.have\n                                .property(&#x27;message&#x27;).eql(&#x27;Invalid input&#x27;);\n                            res.body.error.should.have\n                                .property(&#x27;name&#x27;).eql(&#x27;ValidationError&#x27;);\n                            res.body.error.should.have.property(&#x27;errors&#x27;);\n                            res.body.should.be.a(&#x27;object&#x27;);\n                            done();\n                        });\n                });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;00a75675-e0e8-4c96-9d93-a457e06824e4&quot;,&quot;parentUUID&quot;:&quot;c22232db-e03b-4332-9128-a7f110c0d08a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should POST a question &quot;,&quot;fullTitle&quot;:&quot;Questions /POST questions it should POST a question &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:174,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n                \&quot;pseudo\&quot;: process.env[\&quot;ADMIN_PSEUDO\&quot;],\n                \&quot;password\&quot;: process.env[\&quot;ADMIN_PSD\&quot;]\n            };\n            const question = new Question({\n                \&quot;type\&quot;: \&quot;boolean\&quot;, \&quot;question\&quot;: \&quot;what&#x27;s 2000 - 150 ?\&quot;,\n                \&quot;answers\&quot;: [{\&quot;option\&quot;: \&quot;true\&quot;, \&quot;isCorrect\&quot;: true},\n                    {\&quot;option\&quot;: \&quot;false\&quot;, \&quot;isCorrect\&quot;: false}\n                ]\n            });\n            chai.request(server)\n                .post(&#x27;/server/api/login&#x27;)\n                .send(user)\n                .end((err, res) =&gt; {\n                    chai.request(server)\n                        .post(&#x27;/server/api/questions&#x27;)\n                        .send(question)\n                        .set(&#x27;Authorization&#x27;, res.body.token)\n                        .end((err, res) =&gt; {\n                            res.should.have.status(201);\n                            res.body.should.be.a(&#x27;object&#x27;);\n                            res.body.createdQuestion.should.be.a(&#x27;object&#x27;);\n                            res.body.should.have\n                                .property(&#x27;message&#x27;)\n                                .eql(&#x27;Created question successfully !&#x27;);\n                            done();\n                        });\n                });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;470735fe-cceb-4e65-abac-c3294d964ab9&quot;,&quot;parentUUID&quot;:&quot;c22232db-e03b-4332-9128-a7f110c0d08a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;00a75675-e0e8-4c96-9d93-a457e06824e4&quot;,&quot;470735fe-cceb-4e65-abac-c3294d964ab9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:336,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;9d191660-b73d-41b9-a0b1-fe7120a2e302&quot;,&quot;title&quot;:&quot;/GET/:id question&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\morga\\Documents\\mean-stack-web-app\\server-side\\tests\\questions.js&quot;,&quot;file&quot;:&quot;\\server-side\\tests\\questions.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET a question by the given id&quot;,&quot;fullTitle&quot;:&quot;Questions /GET/:id question it should GET a question by the given id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:121,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n                \&quot;pseudo\&quot;: process.env[\&quot;ADMIN_PSEUDO\&quot;],\n                \&quot;password\&quot;: process.env[\&quot;ADMIN_PSD\&quot;]\n            };\n            const question = new Question({\n                \&quot;type\&quot;: \&quot;boolean\&quot;,\n                \&quot;question\&quot;: \&quot;what&#x27;s 2000 - 150 ?\&quot;,\n                \&quot;answers\&quot;: [{\&quot;option\&quot;: \&quot;true\&quot;, \&quot;isCorrect\&quot;: true},\n                    {\&quot;option\&quot;: \&quot;false\&quot;, \&quot;isCorrect\&quot;: false}\n                ]\n            });\n            chai.request(server)\n                .post(&#x27;/server/api/login&#x27;)\n                .send(user)\n                .end((err, res1) =&gt; {\n                    chai.request(server)\n                        .post(&#x27;/server/api/questions&#x27;)\n                        .send(question)\n                        .set(&#x27;Authorization&#x27;, res1.body.token)\n                        .end((err, res2) =&gt; {\n                            const questionId = res2.body.createdQuestion.id;\n                            chai.request(server)\n                                .get(`/server/api/questions/${questionId}`)\n                                .set(&#x27;Authorization&#x27;, res1.body.token)\n                                .end((err, res3) =&gt; {\n                                    res3.should.have.status(200);\n                                    res3.body[0].should.have\n                                        .property(&#x27;question&#x27;)\n                                        .eql(\&quot;what&#x27;s 2000 - 150 ?\&quot;);\n                                });\n                        });\n                    done();\n                });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;88b4fe73-0002-4403-a53f-f64139f8f357&quot;,&quot;parentUUID&quot;:&quot;9d191660-b73d-41b9-a0b1-fe7120a2e302&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT GET a question with a missing or invalid JWT&quot;,&quot;fullTitle&quot;:&quot;Questions /GET/:id question it should NOT GET a question with a missing or invalid JWT&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:134,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n                \&quot;pseudo\&quot;: process.env[\&quot;ADMIN_PSEUDO\&quot;],\n                \&quot;password\&quot;: process.env[\&quot;ADMIN_PSD\&quot;]\n            };\n            chai.request(server)\n                .post(&#x27;/server/api/login&#x27;)\n                .send(user)\n                .end(() =&gt; {\n                    chai.request(server)\n                        .get(&#x27;/server/api/questions/92640se51167daq4c81f4312&#x27;)\n                        .end((err, res2) =&gt; {\n                            res2.should.have.status(401);\n                            Object.keys(res2.body).length.should.be.eql(0);\n                        });\n                    done();\n                });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a202bca6-47b1-478a-abd8-bf14fe6d47f3&quot;,&quot;parentUUID&quot;:&quot;9d191660-b73d-41b9-a0b1-fe7120a2e302&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT GET a question with a wrong id&quot;,&quot;fullTitle&quot;:&quot;Questions /GET/:id question it should NOT GET a question with a wrong id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:123,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n                \&quot;pseudo\&quot;: process.env[\&quot;ADMIN_PSEUDO\&quot;],\n                \&quot;password\&quot;: process.env[\&quot;ADMIN_PSD\&quot;]\n            };\n            chai.request(server)\n                .post(&#x27;/server/api/login&#x27;)\n                .send(user)\n                .end((err, res1) =&gt; {\n                    chai.request(server)\n                        .get(&#x27;/server/api/questions/1f468dbf5082002118fc8821&#x27;)\n                        .set(&#x27;Authorization&#x27;, res1.body.token)\n                        .end((err, res2) =&gt; {\n                            res2.should.have.status(404);\n                            res2.body.should.have\n                                .property(&#x27;message&#x27;)\n                                .eql(&#x27;No valid entry found for provided ID&#x27;);\n                            done();\n                        });\n                });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;212b5ae8-f098-487f-bfa6-c35af89a956e&quot;,&quot;parentUUID&quot;:&quot;9d191660-b73d-41b9-a0b1-fe7120a2e302&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;88b4fe73-0002-4403-a53f-f64139f8f357&quot;,&quot;a202bca6-47b1-478a-abd8-bf14fe6d47f3&quot;,&quot;212b5ae8-f098-487f-bfa6-c35af89a956e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:378,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;03bd4afb-9336-42ef-8f37-072fba86eedb&quot;,&quot;title&quot;:&quot;/PATCH/:id question&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\morga\\Documents\\mean-stack-web-app\\server-side\\tests\\questions.js&quot;,&quot;file&quot;:&quot;\\server-side\\tests\\questions.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should NOT PATCH a question with a wrong id&quot;,&quot;fullTitle&quot;:&quot;Questions /PATCH/:id question it should NOT PATCH a question with a wrong id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n                \&quot;pseudo\&quot;: process.env[\&quot;ADMIN_PSEUDO\&quot;],\n                \&quot;password\&quot;: process.env[\&quot;ADMIN_PSD\&quot;]\n            };\n            const question = {\n                \&quot;type\&quot;: \&quot;boolean\&quot;,\n                \&quot;question\&quot;: \&quot;what&#x27;s 2000 - 150 ?\&quot;,\n                \&quot;answers\&quot;: [{\&quot;option\&quot;: \&quot;true\&quot;, \&quot;isCorrect\&quot;: true},\n                    {\&quot;option\&quot;: \&quot;false\&quot;, \&quot;isCorrect\&quot;: false}\n                ]\n            };\n            chai.request(server)\n                .post(&#x27;/server/api/login&#x27;)\n                .send(user)\n                .end((err, res1) =&gt; {\n                    chai.request(server)\n                        .patch(&#x27;/server/api/questions/5e97314f7cb39f58e4e21ed6&#x27;)\n                        .send(question)\n                        .set(&#x27;Authorization&#x27;, res1.body.token)\n                        .end((err, res2) =&gt; {\n                            res2.should.have.status(404);\n                            res2.body.should.be.a(&#x27;object&#x27;);\n                            res2.body.should.have\n                                .property(&#x27;message&#x27;)\n                                .eql(&#x27;No valid entry found for provided ID&#x27;);\n                        });\n                });\n            done();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a427df95-242e-4c27-9d86-25b934f7f747&quot;,&quot;parentUUID&quot;:&quot;03bd4afb-9336-42ef-8f37-072fba86eedb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should PATCH a question by the given id&quot;,&quot;fullTitle&quot;:&quot;Questions /PATCH/:id question it should PATCH a question by the given id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n                \&quot;pseudo\&quot;: process.env[\&quot;ADMIN_PSEUDO\&quot;],\n                \&quot;password\&quot;: process.env[\&quot;ADMIN_PSD\&quot;]\n            };\n            const question = new Question({\n                \&quot;type\&quot;: \&quot;multiple\&quot;,\n                \&quot;question\&quot;: \&quot;what&#x27;s 22 - 150 ?\&quot;,\n                \&quot;answers\&quot;: [{\&quot;option\&quot;: \&quot;true\&quot;, \&quot;isCorrect\&quot;: true},\n                    {\&quot;option\&quot;: \&quot;false\&quot;, \&quot;isCorrect\&quot;: false}\n                ]\n            });\n            chai.request(server)\n                .post(&#x27;/server/api/login&#x27;)\n                .send(user)\n                .end((err, res1) =&gt; {\n                    chai.request(server)\n                        .post(&#x27;/server/api/questions&#x27;)\n                        .send(question)\n                        .set(&#x27;Authorization&#x27;, res1.body.token)\n                        .end((err, res2) =&gt; {\n                            const questionId = res2.body.createdQuestion.id;\n                            question.type = \&quot;boolean\&quot;;\n                            delete Object.values(question)[3]._id;\n                            delete Object.values(question)[3].__v;\n                            chai.request(server)\n                                .patch(`/server/api/questions/${questionId}`)\n                                .send(question)\n                                .set(&#x27;Authorization&#x27;, res1.body.token)\n                                .end((err, res3) =&gt; {\n                                    res3.should.have.status(200);\n                                    res3.body.should.have.property(&#x27;message&#x27;).eql(&#x27;Question updated successfully !&#x27;);\n                                    res3.body.should.have.property(&#x27;modifiedDocs&#x27;).eql(1);\n                                });\n                        });\n                });\n            done();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9caa5846-8e4e-497a-afd5-070d12812a75&quot;,&quot;parentUUID&quot;:&quot;03bd4afb-9336-42ef-8f37-072fba86eedb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT PATCH a question with a missing or invalid JWT&quot;,&quot;fullTitle&quot;:&quot;Questions /PATCH/:id question it should NOT PATCH a question with a missing or invalid JWT&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:117,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n                \&quot;pseudo\&quot;: process.env[\&quot;ADMIN_PSEUDO\&quot;],\n                \&quot;password\&quot;: process.env[\&quot;ADMIN_PSD\&quot;]\n            };\n            chai.request(server)\n                .post(&#x27;/server/api/login&#x27;)\n                .send(user)\n                .end(() =&gt; {\n                    chai.request(server)\n                        .patch(&#x27;/server/api/questions/92640se51167daq4c81f4312&#x27;)\n                        .end((err, res2) =&gt; {\n                            res2.should.have.status(401);\n                            Object.keys(res2.body).length.should.be.eql(0);\n                        });\n                    done();\n                });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cb49b761-0156-444d-ab93-eb45d8b1a4ed&quot;,&quot;parentUUID&quot;:&quot;03bd4afb-9336-42ef-8f37-072fba86eedb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a427df95-242e-4c27-9d86-25b934f7f747&quot;,&quot;9caa5846-8e4e-497a-afd5-070d12812a75&quot;,&quot;cb49b761-0156-444d-ab93-eb45d8b1a4ed&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:123,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;c0530e0d-976b-4ff6-a198-6f52e8ad0431&quot;,&quot;title&quot;:&quot;/DELETE/:id question&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\morga\\Documents\\mean-stack-web-app\\server-side\\tests\\questions.js&quot;,&quot;file&quot;:&quot;\\server-side\\tests\\questions.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should DELETE a question by the given id&quot;,&quot;fullTitle&quot;:&quot;Questions /DELETE/:id question it should DELETE a question by the given id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:106,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n                \&quot;pseudo\&quot;: process.env[\&quot;ADMIN_PSEUDO\&quot;],\n                \&quot;password\&quot;: process.env[\&quot;ADMIN_PSD\&quot;]\n            };\n            const question = new Question({\n                \&quot;type\&quot;: \&quot;multiple\&quot;,\n                \&quot;question\&quot;: \&quot;what&#x27;s 22 - 150 ?\&quot;,\n                \&quot;answers\&quot;: [{\&quot;option\&quot;: \&quot;true\&quot;, \&quot;isCorrect\&quot;: true},\n                    {\&quot;option\&quot;: \&quot;false\&quot;, \&quot;isCorrect\&quot;: false}\n                ]\n            });\n            chai.request(server)\n                .post(&#x27;/server/api/login&#x27;)\n                .send(user)\n                .end((err, res1) =&gt; {\n                    chai.request(server)\n                        .post(&#x27;/server/api/questions&#x27;)\n                        .send(question)\n                        .set(&#x27;Authorization&#x27;, res1.body.token)\n                        .end((err, res2) =&gt; {\n                            const questionId = res2.body.createdQuestion.id;\n                            chai.request(server)\n                                .delete(`/server/api/questions/${questionId}`)\n                                .set(&#x27;Authorization&#x27;, res1.body.token)\n                                .end((err, res3) =&gt; {\n                                    res3.should.have.status(200);\n                                });\n                        });\n                    done();\n                });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e1c6f0e0-c686-44c8-806b-632fb0479720&quot;,&quot;parentUUID&quot;:&quot;c0530e0d-976b-4ff6-a198-6f52e8ad0431&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT DELETE a question with a wrong id&quot;,&quot;fullTitle&quot;:&quot;Questions /DELETE/:id question it should NOT DELETE a question with a wrong id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:114,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n                \&quot;pseudo\&quot;: process.env[\&quot;ADMIN_PSEUDO\&quot;],\n                \&quot;password\&quot;: process.env[\&quot;ADMIN_PSD\&quot;]\n            };\n            chai.request(server)\n                .post(&#x27;/server/api/login&#x27;)\n                .send(user)\n                .end((err, res1) =&gt; {\n                    chai.request(server)\n                        .delete(&#x27;/server/api/questions/1c7414e51167af71f81f4313&#x27;)\n                        .set(&#x27;Authorization&#x27;, res1.body.token)\n                        .end((err, res2) =&gt; {\n                            res2.should.have.status(404);\n                            res2.body.should.have.property(&#x27;message&#x27;)\n                                .eql(&#x27;No valid entry found for provided ID&#x27;);\n                        });\n                    done();\n                });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;237dab22-fddd-4635-bde9-bb894fd00178&quot;,&quot;parentUUID&quot;:&quot;c0530e0d-976b-4ff6-a198-6f52e8ad0431&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e1c6f0e0-c686-44c8-806b-632fb0479720&quot;,&quot;237dab22-fddd-4635-bde9-bb894fd00178&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:220,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;411241e1-5929-46bb-ab99-2da30104bce6&quot;,&quot;title&quot;:&quot;Reviews&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\morga\\Documents\\mean-stack-web-app\\server-side\\tests\\reviews.js&quot;,&quot;file&quot;:&quot;\\server-side\\tests\\reviews.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;fa5ae2e1-22d4-4a5d-b16e-713aecf51c86&quot;,&quot;title&quot;:&quot;/GET reviews&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\morga\\Documents\\mean-stack-web-app\\server-side\\tests\\reviews.js&quot;,&quot;file&quot;:&quot;\\server-side\\tests\\reviews.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should get all reviews&quot;,&quot;fullTitle&quot;:&quot;Reviews /GET reviews it should get all reviews&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:140,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai.request(server)\n                .get(&#x27;/server/api/reviews/all&#x27;)\n                .end((err, res) =&gt; {\n                    res.should.have.status(200);\n                    res.body.should.be.an(&#x27;array&#x27;);\n                    done();\n                });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b393bbda-c40b-48f8-b486-a48209b77b85&quot;,&quot;parentUUID&quot;:&quot;fa5ae2e1-22d4-4a5d-b16e-713aecf51c86&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b393bbda-c40b-48f8-b486-a48209b77b85&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:140,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;3481b229-8cdd-4061-b65d-c22e921c323a&quot;,&quot;title&quot;:&quot;/POST review&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\morga\\Documents\\mean-stack-web-app\\server-side\\tests\\reviews.js&quot;,&quot;file&quot;:&quot;\\server-side\\tests\\reviews.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should create a review&quot;,&quot;fullTitle&quot;:&quot;Reviews /POST review it should create a review&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:102,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n                \&quot;pseudo\&quot;: process.env[\&quot;ADMIN_PSEUDO\&quot;],\n                \&quot;password\&quot;: process.env[\&quot;ADMIN_PSD\&quot;]\n            };\n            const review = {\n                \&quot;rating\&quot;: \&quot;3\&quot;,\n                \&quot;reviewText\&quot;: \&quot;This is the 3rd review\&quot;\n            };\n            chai.request(server)\n                .post(&#x27;/server/api/login&#x27;)\n                .send(user)\n                .end((err, res1) =&gt; {\n                    const userId = res1.body.user.userId;\n                    chai.request(server)\n                        .post(`/server/api/user/${userId}/reviews`)\n                        .send(review)\n                        .set(&#x27;Authorization&#x27;, res1.body.token)\n                        .end((err, res2) =&gt; {\n                            res2.should.have.status(201);\n                            res2.body.should.have.property(&#x27;message&#x27;)\n                                .eql(&#x27;Review created successfully !&#x27;);\n                            res2.body.review.should.be.a(&#x27;object&#x27;);\n                        });\n                    done();\n                });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;20f34c60-3bca-4e1f-b9f4-c15a71331b7d&quot;,&quot;parentUUID&quot;:&quot;3481b229-8cdd-4061-b65d-c22e921c323a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT create a review with a missing or invalid JWT&quot;,&quot;fullTitle&quot;:&quot;Reviews /POST review it should NOT create a review with a missing or invalid JWT&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:141,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n                \&quot;pseudo\&quot;: process.env[\&quot;ADMIN_PSEUDO\&quot;],\n                \&quot;password\&quot;: process.env[\&quot;ADMIN_PSD\&quot;]\n            };\n            const review = {\n                \&quot;rating\&quot;: \&quot;3\&quot;,\n                \&quot;reviewText\&quot;: \&quot;This is the 3rd review\&quot;\n            };\n            chai.request(server)\n                .post(&#x27;/server/api/login&#x27;)\n                .send(user)\n                .end((err, res1) =&gt; {\n                    const userId = res1.body.user.userId;\n                    chai.request(server)\n                        .post(`/server/api/user/${userId}/reviews`)\n                        .send(review)\n                        .end((err, res2) =&gt; {\n                            res2.should.have.status(401);\n                            Object.keys(res2.body).length.should.be.eql(0);\n                        });\n                    done();\n                });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;02458e7c-ec18-46db-85ec-b30cfff89e75&quot;,&quot;parentUUID&quot;:&quot;3481b229-8cdd-4061-b65d-c22e921c323a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT create a review with a wrong user id&quot;,&quot;fullTitle&quot;:&quot;Reviews /POST review it should NOT create a review with a wrong user id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:123,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n                \&quot;pseudo\&quot;: process.env[\&quot;ADMIN_PSEUDO\&quot;],\n                \&quot;password\&quot;: process.env[\&quot;ADMIN_PSD\&quot;]\n            };\n            const review = {\n                \&quot;rating\&quot;: \&quot;3\&quot;,\n                \&quot;reviewText\&quot;: \&quot;This is the 3rd review\&quot;\n            };\n            chai.request(server)\n                .post(&#x27;/server/api/login&#x27;)\n                .send(user)\n                .end((err, res1) =&gt; {\n                    chai.request(server)\n                        .post(&#x27;/server/api/user/1f468dbf5082002118fc8821/reviews&#x27;)\n                        .send(review)\n                        .set(&#x27;Authorization&#x27;, res1.body.token)\n                        .end((err, res2) =&gt; {\n                            res2.should.have.status(404);\n                            res2.body.should.have.property(&#x27;message&#x27;)\n                                .eql(&#x27;No user found with the provided ID&#x27;);\n                        });\n                    done();\n                });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8e5425a7-4822-474a-a36d-8d3257df55d0&quot;,&quot;parentUUID&quot;:&quot;3481b229-8cdd-4061-b65d-c22e921c323a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;20f34c60-3bca-4e1f-b9f4-c15a71331b7d&quot;,&quot;02458e7c-ec18-46db-85ec-b30cfff89e75&quot;,&quot;8e5425a7-4822-474a-a36d-8d3257df55d0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:366,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;2eab33de-7ac3-453d-9c76-4d4172905663&quot;,&quot;title&quot;:&quot;/PATCH:id review&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\morga\\Documents\\mean-stack-web-app\\server-side\\tests\\reviews.js&quot;,&quot;file&quot;:&quot;\\server-side\\tests\\reviews.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should PATCH a review with the given email&quot;,&quot;fullTitle&quot;:&quot;Reviews /PATCH:id review it should PATCH a review with the given email&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:107,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n                \&quot;pseudo\&quot;: process.env[\&quot;ADMIN_PSEUDO\&quot;],\n                \&quot;password\&quot;: process.env[\&quot;ADMIN_PSD\&quot;]\n            };\n            const review = {\n                \&quot;rating\&quot;: \&quot;9\&quot;,\n                \&quot;reviewText\&quot;: \&quot;This is mocha\&quot;\n            };\n            chai.request(server)\n                .post(&#x27;/server/api/login&#x27;)\n                .send(user)\n                .end((err, res1) =&gt; {\n                    const userId = res1.body.user.userId;\n                    const userEmail = res1.body.user.userEmail;\n                    chai.request(server)\n                        .post(`/server/api/user/${userId}/reviews`)\n                        .send(review)\n                        .set(&#x27;Authorization&#x27;, res1.body.token)\n                        .end((err, res2) =&gt; {\n                            const reviewId = res2.body.review._id;\n                            review.rating = \&quot;10\&quot;;\n                            chai.request(server)\n                                .patch(`/server/api/user/${userEmail}/reviews/${reviewId}`)\n                                .send(review)\n                                .set(&#x27;Authorization&#x27;, res1.body.token)\n                                .end((err, res3) =&gt; {\n                                    res3.should.have.status(200);\n                                    res3.body.should.have.property(&#x27;message&#x27;)\n                                        .eql(&#x27;Review updated successfully !&#x27;);\n                                    res2.body.review.should.be.a(&#x27;object&#x27;);\n                                });\n                        });\n                    done();\n                });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;20fb51d2-9d05-4557-a684-8a25be2760d9&quot;,&quot;parentUUID&quot;:&quot;2eab33de-7ac3-453d-9c76-4d4172905663&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT PATCH a review whose user is non-existent&quot;,&quot;fullTitle&quot;:&quot;Reviews /PATCH:id review it should NOT PATCH a review whose user is non-existent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:166,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n                \&quot;pseudo\&quot;: process.env[\&quot;ADMIN_PSEUDO\&quot;],\n                \&quot;password\&quot;: process.env[\&quot;ADMIN_PSD\&quot;]\n            };\n            const review = {\n                \&quot;rating\&quot;: \&quot;9\&quot;,\n                \&quot;reviewText\&quot;: \&quot;This is mocha\&quot;\n            };\n            const userEmail = \&quot;@gmail.com\&quot;;\n            const reviewId = \&quot;1f468dbf5182002118fc8821\&quot;;\n            chai.request(server)\n                .post(&#x27;/server/api/login&#x27;)\n                .send(user)\n                .end((err, res1) =&gt; {\n                    chai.request(server)\n                        .patch(`/server/api/user/${userEmail}/reviews/${reviewId}`)\n                        .send(review)\n                        .set(&#x27;Authorization&#x27;, res1.body.token)\n                        .end((err, res2) =&gt; {\n                            res2.should.have.status(404);\n                            res2.body.should.have.property(&#x27;message&#x27;)\n                                .eql(&#x27;No user was found with provided Email&#x27;);\n                            done();\n                        });\n                });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ff5aa783-dcbc-4e30-89cb-d807abf12302&quot;,&quot;parentUUID&quot;:&quot;2eab33de-7ac3-453d-9c76-4d4172905663&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT PATCH a review with a wrong id&quot;,&quot;fullTitle&quot;:&quot;Reviews /PATCH:id review it should NOT PATCH a review with a wrong id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:152,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n                \&quot;pseudo\&quot;: process.env[\&quot;ADMIN_PSEUDO\&quot;],\n                \&quot;password\&quot;: process.env[\&quot;ADMIN_PSD\&quot;]\n            };\n            const review = {\n                \&quot;rating\&quot;: \&quot;9\&quot;,\n                \&quot;reviewText\&quot;: \&quot;This is mocha\&quot;\n            };\n            const userEmail = \&quot;dan30@gmail.com\&quot;;\n            const reviewId = \&quot;1f468dbf5182002118fc8821\&quot;;\n            chai.request(server)\n                .post(&#x27;/server/api/login&#x27;)\n                .send(user)\n                .end((err, res1) =&gt; {\n                    chai.request(server)\n                        .patch(`/server/api/user/${userEmail}/reviews/${reviewId}`)\n                        .send(review)\n                        .set(&#x27;Authorization&#x27;, res1.body.token)\n                        .end((err, res2) =&gt; {\n                            res2.should.have.status(404);\n                            res2.body.should.have.property(&#x27;message&#x27;)\n                                .eql(&#x27;No was review found with provided ID&#x27;);\n                            done();\n                        });\n                });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a1577bc5-5cfe-4b0a-966a-403fda33a534&quot;,&quot;parentUUID&quot;:&quot;2eab33de-7ac3-453d-9c76-4d4172905663&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT PATCH a review with a missing or invalid JWT&quot;,&quot;fullTitle&quot;:&quot;Reviews /PATCH:id review it should NOT PATCH a review with a missing or invalid JWT&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:108,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n                \&quot;pseudo\&quot;: process.env[\&quot;ADMIN_PSEUDO\&quot;],\n                \&quot;password\&quot;: process.env[\&quot;ADMIN_PSD\&quot;]\n            };\n            const review = {\n                \&quot;rating\&quot;: \&quot;3\&quot;,\n                \&quot;reviewText\&quot;: \&quot;This is the 3rd review\&quot;\n            };\n            const userEmail = \&quot;dan30@gmail.com\&quot;;\n            const reviewId = \&quot;1f468dbf5182002118fc8821\&quot;;\n            chai.request(server)\n                .post(&#x27;/server/api/login&#x27;)\n                .send(user)\n                .end(() =&gt; {\n                    chai.request(server)\n                        .patch(`/server/api/user/${userEmail}/reviews/${reviewId}`)\n                        .send(review)\n                        .end((err, res2) =&gt; {\n                            res2.should.have.status(401);\n                            Object.keys(res2.body).length.should.be.eql(0);\n                        });\n                    done();\n                });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2ee59976-51d5-40a2-9732-ba030600d04d&quot;,&quot;parentUUID&quot;:&quot;2eab33de-7ac3-453d-9c76-4d4172905663&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT PATCH a review whose user has none&quot;,&quot;fullTitle&quot;:&quot;Reviews /PATCH:id review it should NOT PATCH a review whose user has none&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:103,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = Math.random().toString(36).substr(2, 4);\n            const user1 = {\n                \&quot;username\&quot;: user,\n                \&quot;email\&quot;: `${user}@gmail.com`,\n                \&quot;password\&quot;: \&quot;toto\&quot;\n            };\n            const review = {\n                \&quot;rating\&quot;: \&quot;3\&quot;,\n                \&quot;reviewText\&quot;: \&quot;This is the 3rd review\&quot;\n            };\n            const reviewId = \&quot;1f468dbf5182002118fc8821\&quot;;\n            chai.request(server)\n                .post(&#x27;/server/api/signup&#x27;)\n                .send(user1)\n                .end(() =&gt; {\n                    chai.request(server)\n                        .post(&#x27;/server/api/login&#x27;)\n                        .send({\n                            \&quot;pseudo\&quot;: user,\n                            \&quot;password\&quot;: \&quot;toto\&quot;\n                        })\n                        .end((err, res1) =&gt; {\n                            chai.request(server)\n                                .patch(`/server/api/user/${user1.email}/reviews/${reviewId}`)\n                                .set(&#x27;Authorization&#x27;, res1.body.token)\n                                .send(review)\n                                .end((err, res2) =&gt; {\n                                    res2.should.have.status(404);\n                                    res2.body.should.have.property(&#x27;message&#x27;)\n                                        .eql(&#x27;No Review to update&#x27;);\n                                });\n                        });\n                    done();\n                });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;03191378-7e42-46f4-b680-7a8d76111f67&quot;,&quot;parentUUID&quot;:&quot;2eab33de-7ac3-453d-9c76-4d4172905663&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT PATCH a review if some request body&#x27;s field(s) are not allowed&quot;,&quot;fullTitle&quot;:&quot;Reviews /PATCH:id review it should NOT PATCH a review if some request body&#x27;s field(s) are not allowed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:198,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n                \&quot;pseudo\&quot;: process.env[\&quot;ADMIN_PSEUDO\&quot;],\n                \&quot;password\&quot;: process.env[\&quot;ADMIN_PSD\&quot;]\n            };\n            const review = {\n                \&quot;rating\&quot;: \&quot;9\&quot;,\n                \&quot;reviewText\&quot;: \&quot;This is mocha\&quot;,\n                \&quot;reviewComment\&quot;: \&quot;This is mocha v2\&quot;\n            };\n            chai.request(server)\n                .post(&#x27;/server/api/login&#x27;)\n                .send(user)\n                .end((err, res1) =&gt; {\n                    const userId = res1.body.user.userId;\n                    const userEmail = res1.body.user.userEmail;\n                    chai.request(server)\n                        .post(`/server/api/user/${userId}/reviews`)\n                        .send(review)\n                        .set(&#x27;Authorization&#x27;, res1.body.token)\n                        .end((err, res2) =&gt; {\n                            const reviewId = res2.body.review._id;\n                            review.rating = \&quot;10\&quot;;\n                            chai.request(server)\n                                .patch(`/server/api/user/${userEmail}/reviews/${reviewId}`)\n                                .send(review)\n                                .set(&#x27;Authorization&#x27;, res1.body.token)\n                                .end((err, res3) =&gt; {\n                                    res3.should.have.status(405);\n                                    res3.body.should.have.property(&#x27;message&#x27;)\n                                        .eql(&#x27;Some fields are NOT allowed !&#x27;);\n                                });\n                        });\n                    done();\n                });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;18824e3b-7c7d-423e-af9c-0942ee5484b5&quot;,&quot;parentUUID&quot;:&quot;2eab33de-7ac3-453d-9c76-4d4172905663&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;20fb51d2-9d05-4557-a684-8a25be2760d9&quot;,&quot;ff5aa783-dcbc-4e30-89cb-d807abf12302&quot;,&quot;a1577bc5-5cfe-4b0a-966a-403fda33a534&quot;,&quot;2ee59976-51d5-40a2-9732-ba030600d04d&quot;,&quot;03191378-7e42-46f4-b680-7a8d76111f67&quot;,&quot;18824e3b-7c7d-423e-af9c-0942ee5484b5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:834,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;5219700a-3455-4885-8653-40931db2067b&quot;,&quot;title&quot;:&quot;/DELETE:id review&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\morga\\Documents\\mean-stack-web-app\\server-side\\tests\\reviews.js&quot;,&quot;file&quot;:&quot;\\server-side\\tests\\reviews.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should DELETE a review with the given id&quot;,&quot;fullTitle&quot;:&quot;Reviews /DELETE:id review it should DELETE a review with the given id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:213,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n                \&quot;pseudo\&quot;: process.env[\&quot;ADMIN_PSEUDO\&quot;],\n                \&quot;password\&quot;: process.env[\&quot;ADMIN_PSD\&quot;]\n            };\n            const review = {\n                \&quot;rating\&quot;: \&quot;9\&quot;,\n                \&quot;reviewText\&quot;: \&quot;This is mocha\&quot;\n            };\n            chai.request(server)\n                .post(&#x27;/server/api/login&#x27;)\n                .send(user)\n                .end((err, res1) =&gt; {\n                    const userId = res1.body.user.userId;\n                    const userEmail = res1.body.user.userEmail;\n                    chai.request(server)\n                        .post(`/server/api/user/${userId}/reviews`)\n                        .send(review)\n                        .set(&#x27;Authorization&#x27;, res1.body.token)\n                        .end((err, res2) =&gt; {\n                            const reviewId = res2.body.review._id;\n                            chai.request(server)\n                                .delete(`/server/api/user/${userEmail}/reviews/${reviewId}`)\n                                .send(review)\n                                .set(&#x27;Authorization&#x27;, res1.body.token)\n                                .end((err, res3) =&gt; {\n                                    res3.should.have.status(200);\n                                    res3.body.should.have.property(&#x27;message&#x27;)\n                                        .eql(&#x27;Review deleted successfully !&#x27;);\n                                });\n                        });\n                    done();\n                });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;98b75764-8732-4d47-80cf-3502e4931c50&quot;,&quot;parentUUID&quot;:&quot;5219700a-3455-4885-8653-40931db2067b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT DELETE a review whose user is non-existent&quot;,&quot;fullTitle&quot;:&quot;Reviews /DELETE:id review it should NOT DELETE a review whose user is non-existent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:377,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n                \&quot;pseudo\&quot;: process.env[\&quot;ADMIN_PSEUDO\&quot;],\n                \&quot;password\&quot;: process.env[\&quot;ADMIN_PSD\&quot;]\n            };\n            const userEmail = \&quot;@gmail.com\&quot;;\n            const reviewId = \&quot;1f468dbf5182002118fc8821\&quot;;\n            chai.request(server)\n                .post(&#x27;/server/api/login&#x27;)\n                .send(user)\n                .end((err, res1) =&gt; {\n                    chai.request(server)\n                        .patch(`/server/api/user/${userEmail}/reviews/${reviewId}`)\n                        .set(&#x27;Authorization&#x27;, res1.body.token)\n                        .end((err, res2) =&gt; {\n                            res2.should.have.status(404);\n                            res2.body.should.have.property(&#x27;message&#x27;)\n                                .eql(&#x27;No user was found with provided Email&#x27;);\n                            done();\n                        });\n                });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4a641cf3-18e8-408f-b608-e2409a852e84&quot;,&quot;parentUUID&quot;:&quot;5219700a-3455-4885-8653-40931db2067b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT DELETE a review with a wrong id&quot;,&quot;fullTitle&quot;:&quot;Reviews /DELETE:id review it should NOT DELETE a review with a wrong id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:129,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n                \&quot;pseudo\&quot;: process.env[\&quot;ADMIN_PSEUDO\&quot;],\n                \&quot;password\&quot;: process.env[\&quot;ADMIN_PSD\&quot;]\n            };\n            const userEmail = \&quot;dan30@gmail.com\&quot;;\n            const reviewId = \&quot;1f468dbf5182002118fc8821\&quot;;\n            chai.request(server)\n                .post(&#x27;/server/api/login&#x27;)\n                .send(user)\n                .end((err, res1) =&gt; {\n                    chai.request(server)\n                        .delete(`/server/api/user/${userEmail}/reviews/${reviewId}`)\n                        .set(&#x27;Authorization&#x27;, res1.body.token)\n                        .end((err, res2) =&gt; {\n                            res2.should.have.status(404);\n                            res2.body.should.have.property(&#x27;message&#x27;)\n                                .eql(&#x27;No was review found with provided ID&#x27;);\n                            done();\n                        });\n                });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;12c11639-d5af-4b83-b7b7-d0608d17df2b&quot;,&quot;parentUUID&quot;:&quot;5219700a-3455-4885-8653-40931db2067b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT DELETE a review with a missing or invalid JWT&quot;,&quot;fullTitle&quot;:&quot;Reviews /DELETE:id review it should NOT DELETE a review with a missing or invalid JWT&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:101,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n                \&quot;pseudo\&quot;: process.env[\&quot;ADMIN_PSEUDO\&quot;],\n                \&quot;password\&quot;: process.env[\&quot;ADMIN_PSD\&quot;]\n            };\n            const userEmail = \&quot;dan30@gmail.com\&quot;;\n            const reviewId = \&quot;1f468dbf5182002118fc8821\&quot;;\n            chai.request(server)\n                .post(&#x27;/server/api/login&#x27;)\n                .send(user)\n                .end(() =&gt; {\n                    chai.request(server)\n                        .delete(`/server/api/user/${userEmail}/reviews/${reviewId}`)\n                        .end((err, res2) =&gt; {\n                            res2.should.have.status(401);\n                            Object.keys(res2.body).length.should.be.eql(0);\n                        });\n                    done();\n                });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9aae1d5a-1fd1-4f81-ab8c-917e2660f65f&quot;,&quot;parentUUID&quot;:&quot;5219700a-3455-4885-8653-40931db2067b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT DELETE a review whose user has none&quot;,&quot;fullTitle&quot;:&quot;Reviews /DELETE:id review it should NOT DELETE a review whose user has none&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:100,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = Math.random().toString(36).substr(2, 4);\n            const user1 = {\n                \&quot;username\&quot;: user,\n                \&quot;email\&quot;: `${user}@gmail.com`,\n                \&quot;password\&quot;: \&quot;toto\&quot;\n            };\n            const reviewId = \&quot;1f468dbf5182002118fc8821\&quot;;\n            chai.request(server)\n                .post(&#x27;/server/api/signup&#x27;)\n                .send(user1)\n                .end(() =&gt; {\n                    chai.request(server)\n                        .post(&#x27;/server/api/login&#x27;)\n                        .send({\n                            \&quot;pseudo\&quot;: user,\n                            \&quot;password\&quot;: \&quot;toto\&quot;\n                        })\n                        .end((err, res1) =&gt; {\n                            chai.request(server)\n                                .delete(`/server/api/user/${user1.email}/reviews/${reviewId}`)\n                                .set(&#x27;Authorization&#x27;, res1.body.token)\n                                .end((err, res2) =&gt; {\n                                    res2.should.have.status(404);\n                                    res2.body.should.have.property(&#x27;message&#x27;)\n                                        .eql(&#x27;No Review to delete&#x27;);\n                                });\n                        });\n                    done();\n                });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;828e8c16-9464-4871-aab0-422384c80a6e&quot;,&quot;parentUUID&quot;:&quot;5219700a-3455-4885-8653-40931db2067b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;98b75764-8732-4d47-80cf-3502e4931c50&quot;,&quot;4a641cf3-18e8-408f-b608-e2409a852e84&quot;,&quot;12c11639-d5af-4b83-b7b7-d0608d17df2b&quot;,&quot;9aae1d5a-1fd1-4f81-ab8c-917e2660f65f&quot;,&quot;828e8c16-9464-4871-aab0-422384c80a6e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:920,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;9bf8d1eb-ea1b-4a0b-8abc-45b24275ee98&quot;,&quot;title&quot;:&quot;Users&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\morga\\Documents\\mean-stack-web-app\\server-side\\tests\\users..js&quot;,&quot;file&quot;:&quot;\\server-side\\tests\\users..js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;df7c09ca-7b1d-484a-a6a2-f27d75bb5d9d&quot;,&quot;title&quot;:&quot;/login user&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\morga\\Documents\\mean-stack-web-app\\server-side\\tests\\users..js&quot;,&quot;file&quot;:&quot;\\server-side\\tests\\users..js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should login a user&quot;,&quot;fullTitle&quot;:&quot;Users /login user it should login a user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:102,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n                \&quot;pseudo\&quot;: process.env[\&quot;ADMIN_PSEUDO\&quot;],\n                \&quot;password\&quot;: process.env[\&quot;ADMIN_PSD\&quot;]\n            };\n            chai.request(server)\n                .post(&#x27;/server/api/login&#x27;)\n                .send(user)\n                .end((err, res) =&gt; {\n                    res.should.have.status(200);\n                    res.body.should.have\n                        .property(&#x27;message&#x27;)\n                        .eql(&#x27;Auth successful&#x27;);\n                    res.body.should.have\n                        .property(&#x27;token&#x27;);\n                    done();\n                });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;021f9386-1c17-4f9b-8cd7-e6cda66c4c23&quot;,&quot;parentUUID&quot;:&quot;df7c09ca-7b1d-484a-a6a2-f27d75bb5d9d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT login a user with a wrong password&quot;,&quot;fullTitle&quot;:&quot;Users /login user it should NOT login a user with a wrong password&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n                \&quot;pseudo\&quot;: process.env[\&quot;ADMIN_PSEUDO\&quot;],\n                \&quot;password\&quot;: \&quot;***************\&quot;\n            };\n            chai.request(server)\n                .post(&#x27;/server/api/login&#x27;)\n                .send(user)\n                .end((err, res) =&gt; {\n                    res.should.have.status(401);\n                    res.body.should.have.property(&#x27;message&#x27;).eql(&#x27;Auth failed&#x27;);\n                    res.body.should.have.property(&#x27;success&#x27;).eql(false);\n                });\n            done();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c45e29ca-4917-4f01-a296-f26643adc02e&quot;,&quot;parentUUID&quot;:&quot;df7c09ca-7b1d-484a-a6a2-f27d75bb5d9d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT login a user if some required field(s) are missing&quot;,&quot;fullTitle&quot;:&quot;Users /login user it should NOT login a user if some required field(s) are missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:98,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n                \&quot;pseudo\&quot;: \&quot;admin\&quot;\n            };\n            chai.request(server)\n                .post(&#x27;/server/api/login&#x27;)\n                .send(user)\n                .end((err, res) =&gt; {\n                    res.should.have.status(400);\n                    res.body.should.have\n                        .property(&#x27;message&#x27;)\n                        .eql(&#x27;All fields required&#x27;);\n                    done();\n                });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3cb8133b-18fe-4107-a6b9-ac219a6755c1&quot;,&quot;parentUUID&quot;:&quot;df7c09ca-7b1d-484a-a6a2-f27d75bb5d9d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;021f9386-1c17-4f9b-8cd7-e6cda66c4c23&quot;,&quot;c45e29ca-4917-4f01-a296-f26643adc02e&quot;,&quot;3cb8133b-18fe-4107-a6b9-ac219a6755c1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:201,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;d32e0c59-0c2e-4c58-9298-e0230a01a494&quot;,&quot;title&quot;:&quot;/singup user&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\morga\\Documents\\mean-stack-web-app\\server-side\\tests\\users..js&quot;,&quot;file&quot;:&quot;\\server-side\\tests\\users..js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should create a user&quot;,&quot;fullTitle&quot;:&quot;Users /singup user it should create a user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:102,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n                \&quot;username\&quot;: \&quot;dan330\&quot;,\n                \&quot;email\&quot;: \&quot;dan330@gmail.com\&quot;,\n                \&quot;password\&quot;: \&quot;toto\&quot;\n            };\n            chai.request(server)\n                .post(&#x27;/server/api/signup&#x27;)\n                .send(user)\n                .end((err, res) =&gt; {\n                    res.should.have.status(201);\n                    res.body.should.have\n                        .property(&#x27;message&#x27;)\n                        .eql(&#x27;User created successfully&#x27;);\n                    res.body.should.have\n                        .property(&#x27;user&#x27;);\n                    User.deleteOne({username: \&quot;dan330\&quot;})\n                        .exec().then().catch();\n                    done();\n                });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;842f37cf-3f91-4f90-a418-d5550f0a329a&quot;,&quot;parentUUID&quot;:&quot;d32e0c59-0c2e-4c58-9298-e0230a01a494&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT create a user if the username&#x27;s length is (&gt;= 9 &amp;&amp; &lt;= 4)&quot;,&quot;fullTitle&quot;:&quot;Users /singup user it should NOT create a user if the username&#x27;s length is (&gt;= 9 &amp;&amp; &lt;= 4)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n                \&quot;username\&quot;: \&quot;da\&quot;,\n                \&quot;email\&quot;: \&quot;dan330@gmail.com\&quot;,\n                \&quot;password\&quot;: \&quot;toto\&quot;\n            };\n            chai.request(server)\n                .post(&#x27;/server/api/signup&#x27;)\n                .send(user)\n                .end((err, res) =&gt; {\n                    res.should.have.status(400);\n                    res.body.should.have.property(&#x27;message&#x27;)\n                        .eql(\&quot;Username&#x27;s min length is 4 and max 9 !\&quot;);\n                    res.body.should.have.property(&#x27;success&#x27;)\n                        .eql(false);\n                    done();\n                });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0e05fb64-ab8f-48f3-be35-350e44496f5c&quot;,&quot;parentUUID&quot;:&quot;d32e0c59-0c2e-4c58-9298-e0230a01a494&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT create a user if some required field(s) are missing&quot;,&quot;fullTitle&quot;:&quot;Users /singup user it should NOT create a user if some required field(s) are missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n                \&quot;username\&quot;: \&quot;dan330\&quot;,\n                \&quot;email\&quot;: \&quot;dan330@gmail.com\&quot;,\n            };\n            chai.request(server)\n                .post(&#x27;/server/api/signup&#x27;)\n                .send(user)\n                .end((err, res) =&gt; {\n                    res.should.have.status(400);\n                    res.body.should.have\n                        .property(&#x27;message&#x27;)\n                        .eql(&#x27;All fields required&#x27;);\n                    done();\n                });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9afa5b62-d810-40f8-b1f1-a9ed1452ee51&quot;,&quot;parentUUID&quot;:&quot;d32e0c59-0c2e-4c58-9298-e0230a01a494&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT create a user if he/she already exists&quot;,&quot;fullTitle&quot;:&quot;Users /singup user it should NOT create a user if he/she already exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n                \&quot;username\&quot;: \&quot;admin\&quot;,\n                \&quot;email\&quot;: \&quot;admin10@gmail.com\&quot;,\n                \&quot;password\&quot;: \&quot;***********************\&quot;\n            };\n            chai.request(server)\n                .post(&#x27;/server/api/signup&#x27;)\n                .send(user)\n                .end((err, res) =&gt; {\n                    res.should.have.status(409);\n                    res.body.should.have\n                        .property(&#x27;success&#x27;)\n                        .eql(false);\n                    res.body.should.have\n                        .property(&#x27;message&#x27;)\n                        .eql(&#x27;Mail or Username already exists !&#x27;);\n                    done();\n                });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f24485b9-380a-4ac0-864b-d61f3793ba75&quot;,&quot;parentUUID&quot;:&quot;d32e0c59-0c2e-4c58-9298-e0230a01a494&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;842f37cf-3f91-4f90-a418-d5550f0a329a&quot;,&quot;0e05fb64-ab8f-48f3-be35-350e44496f5c&quot;,&quot;9afa5b62-d810-40f8-b1f1-a9ed1452ee51&quot;,&quot;f24485b9-380a-4ac0-864b-d61f3793ba75&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:120,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;f41ac63b-12fc-4667-9ada-a6be4eaa5cb5&quot;,&quot;title&quot;:&quot;/GET users&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\morga\\Documents\\mean-stack-web-app\\server-side\\tests\\users..js&quot;,&quot;file&quot;:&quot;\\server-side\\tests\\users..js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET all users&quot;,&quot;fullTitle&quot;:&quot;Users /GET users it should GET all users&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:187,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n                \&quot;pseudo\&quot;: process.env[\&quot;ADMIN_PSEUDO\&quot;],\n                \&quot;password\&quot;: process.env[\&quot;ADMIN_PSD\&quot;]\n            };\n            chai.request(server)\n                .post(&#x27;/server/api/login&#x27;)\n                .send(user)\n                .end((err, res) =&gt; {\n                    chai.request(server)\n                        .get(&#x27;/server/api/users/profiles&#x27;)\n                        .set(&#x27;Authorization&#x27;, res.body.token)\n                        .end((err, res) =&gt; {\n                            res.should.have.status(200);\n                            res.body.should.be.an(&#x27;array&#x27;);\n                            done();\n                        });\n                });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d040da8a-8a84-4855-b64f-b0f1954cd6bc&quot;,&quot;parentUUID&quot;:&quot;f41ac63b-12fc-4667-9ada-a6be4eaa5cb5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT GET all user with a missing or invalid JWT&quot;,&quot;fullTitle&quot;:&quot;Users /GET users it should NOT GET all user with a missing or invalid JWT&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:107,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n                \&quot;pseudo\&quot;: process.env[\&quot;ADMIN_PSEUDO\&quot;],\n                \&quot;password\&quot;: process.env[\&quot;ADMIN_PSD\&quot;]\n            };\n            chai.request(server)\n                .post(&#x27;/server/api/login&#x27;)\n                .send(user)\n                .end(() =&gt; {\n                    chai.request(server)\n                        .get(&#x27;/server/api/users/profiles&#x27;)\n                        .end((err, res2) =&gt; {\n                            res2.should.have.status(401);\n                            Object.keys(res2.body).length.should.be.eql(0);\n                        });\n                    done();\n                });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e8e5f3ef-8cf9-46c7-8e9a-819160386915&quot;,&quot;parentUUID&quot;:&quot;f41ac63b-12fc-4667-9ada-a6be4eaa5cb5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT GET all users if the request is sent by a student&quot;,&quot;fullTitle&quot;:&quot;Users /GET users it should NOT GET all users if the request is sent by a student&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:100,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n                \&quot;pseudo\&quot;: \&quot;dan30\&quot;,\n                \&quot;password\&quot;: \&quot;toto\&quot;\n            };\n            chai.request(server)\n                .post(&#x27;/server/api/login&#x27;)\n                .send(user)\n                .end((err, res) =&gt; {\n                    chai.request(server)\n                        .get(&#x27;/server/api/users/profiles&#x27;)\n                        .set(&#x27;Authorization&#x27;, res.body.token)\n                        .end((err, res) =&gt; {\n                            res.should.have.status(403);\n                            res.body.should.have\n                                .property(&#x27;message&#x27;)\n                                .eql(\&quot;You don&#x27;t have enough permission to perform this action\&quot;);\n                            done();\n                        });\n                });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;61753b98-f5b5-4f16-8a0d-2b31a6efc3c6&quot;,&quot;parentUUID&quot;:&quot;f41ac63b-12fc-4667-9ada-a6be4eaa5cb5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d040da8a-8a84-4855-b64f-b0f1954cd6bc&quot;,&quot;e8e5f3ef-8cf9-46c7-8e9a-819160386915&quot;,&quot;61753b98-f5b5-4f16-8a0d-2b31a6efc3c6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:394,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;769d5b09-c8e7-46d9-9b8a-8ceea40923e5&quot;,&quot;title&quot;:&quot;/GET/:id user&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\morga\\Documents\\mean-stack-web-app\\server-side\\tests\\users..js&quot;,&quot;file&quot;:&quot;\\server-side\\tests\\users..js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET a user by id&quot;,&quot;fullTitle&quot;:&quot;Users /GET/:id user it should GET a user by id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:114,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n                \&quot;pseudo\&quot;: process.env[\&quot;ADMIN_PSEUDO\&quot;],\n                \&quot;password\&quot;: process.env[\&quot;ADMIN_PSD\&quot;]\n            };\n            chai.request(server)\n                .post(&#x27;/server/api/login&#x27;)\n                .send(user)\n                .end((err, res) =&gt; {\n                    chai.request(server)\n                        .get(`/server/api/user/${process.env.ADMIN_ID}`)\n                        .set(&#x27;Authorization&#x27;, res.body.token)\n                        .end((err, res) =&gt; {\n                            res.should.have.status(200);\n                            res.body.should.be.an(&#x27;object&#x27;);\n                            res.body.should.have\n                                .property(&#x27;user&#x27;);\n                            done();\n                        });\n                });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;12ca6460-abd3-4215-937d-d61cfdb2d5c4&quot;,&quot;parentUUID&quot;:&quot;769d5b09-c8e7-46d9-9b8a-8ceea40923e5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT GET a user by a wrong id&quot;,&quot;fullTitle&quot;:&quot;Users /GET/:id user it should NOT GET a user by a wrong id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:115,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n                \&quot;pseudo\&quot;: process.env[\&quot;ADMIN_PSEUDO\&quot;],\n                \&quot;password\&quot;: process.env[\&quot;ADMIN_PSD\&quot;]\n            };\n            chai.request(server)\n                .post(&#x27;/server/api/login&#x27;)\n                .send(user)\n                .end((err, res) =&gt; {\n                    chai.request(server)\n                        .get(`/server/api/user/7e7fd1d5f71b123cbc246700`)\n                        .set(&#x27;Authorization&#x27;, res.body.token)\n                        .end((err, res) =&gt; {\n                            res.should.have.status(404);\n                            res.body.should.be.an(&#x27;object&#x27;);\n                            res.body.should.have\n                                .property(&#x27;message&#x27;)\n                                .eql(&#x27;No valid entry found for provided ID&#x27;);\n                            done();\n                        });\n                });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e222dc4c-6f3d-497b-911b-391f807ad4c2&quot;,&quot;parentUUID&quot;:&quot;769d5b09-c8e7-46d9-9b8a-8ceea40923e5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT GET a user with a missing or invalid JWT&quot;,&quot;fullTitle&quot;:&quot;Users /GET/:id user it should NOT GET a user with a missing or invalid JWT&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:101,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n                \&quot;pseudo\&quot;: process.env[\&quot;ADMIN_PSEUDO\&quot;],\n                \&quot;password\&quot;: process.env[\&quot;ADMIN_PSD\&quot;]\n            };\n            chai.request(server)\n                .post(&#x27;/server/api/login&#x27;)\n                .send(user)\n                .end(() =&gt; {\n                    chai.request(server)\n                        .get(&#x27;/server/api/user/1f468dbf5182002118fc8821&#x27;)\n                        .end((err, res2) =&gt; {\n                            res2.should.have.status(401);\n                            Object.keys(res2.body).length.should.be.eql(0);\n                        });\n                    done();\n                });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;82a69c74-137f-4ee3-be48-776e0a50444f&quot;,&quot;parentUUID&quot;:&quot;769d5b09-c8e7-46d9-9b8a-8ceea40923e5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should check that a student can&#x27;t get/see another student&#x27;s profile&quot;,&quot;fullTitle&quot;:&quot;Users /GET/:id user it should check that a student can&#x27;t get/see another student&#x27;s profile&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:293,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = Math.random().toString(36).substr(2, 4);\n            const user0 = Math.random().toString(36).substr(2, 4);\n            const user1 = {\n                \&quot;username\&quot;: user,\n                \&quot;email\&quot;: `${user}@gmail.com`,\n                \&quot;password\&quot;: \&quot;toto\&quot;\n            };\n            const user2 = {\n                \&quot;username\&quot;: user0,\n                \&quot;email\&quot;: `${user0}@gmail.com`,\n                \&quot;password\&quot;: \&quot;toto\&quot;\n            };\n            chai.request(server)\n                .post(&#x27;/server/api/signup&#x27;)\n                .send(user1)\n                .end(() =&gt; {\n                    chai.request(server)\n                        .post(&#x27;/server/api/signup&#x27;)\n                        .send(user2)\n                        .end((err, res2) =&gt; {\n                            chai.request(server)\n                                .post(&#x27;/server/api/login&#x27;)\n                                .send({\n                                    \&quot;pseudo\&quot;: user,\n                                    \&quot;password\&quot;: \&quot;toto\&quot;\n                                })\n                                .end((err, res3) =&gt; {\n                                    chai.request(server)\n                                        .get(`/server/api/user/${res2.body.user.userId}`)\n                                        .set(&#x27;Authorization&#x27;, res3.body.token)\n                                        .end((err, res3) =&gt; {\n                                            res3.should.have.status(403);\n                                            res3.body.should.have\n                                                .property(&#x27;message&#x27;)\n                                                .eql(\&quot;You don&#x27;t have enough permission to perform this action !\&quot;);\n                                            done();\n                                        });\n                                });\n                        });\n                });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e7933ffb-7487-456c-be51-5dc0f3b76132&quot;,&quot;parentUUID&quot;:&quot;769d5b09-c8e7-46d9-9b8a-8ceea40923e5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;12ca6460-abd3-4215-937d-d61cfdb2d5c4&quot;,&quot;e222dc4c-6f3d-497b-911b-391f807ad4c2&quot;,&quot;82a69c74-137f-4ee3-be48-776e0a50444f&quot;,&quot;e7933ffb-7487-456c-be51-5dc0f3b76132&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:623,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;2faad7b2-9076-40b2-a34e-018a8bd3aed4&quot;,&quot;title&quot;:&quot;/PATCH/:id user&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\morga\\Documents\\mean-stack-web-app\\server-side\\tests\\users..js&quot;,&quot;file&quot;:&quot;\\server-side\\tests\\users..js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should PATCH a user by id&quot;,&quot;fullTitle&quot;:&quot;Users /PATCH/:id user it should PATCH a user by id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:208,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n                \&quot;pseudo\&quot;: process.env[\&quot;ADMIN_PSEUDO\&quot;],\n                \&quot;password\&quot;: process.env[\&quot;ADMIN_PSD\&quot;]\n            };\n            chai.request(server)\n                .post(&#x27;/server/api/login&#x27;)\n                .send(user)\n                .end((err, res) =&gt; {\n                    delete user.pseudo;\n                    user.email = `${process.env[\&quot;ADMIN_PSEUDO\&quot;]}@gmail.com`;\n                    chai.request(server)\n                        .patch(`/server/api/user/${process.env.ADMIN_ID}`)\n                        .set(&#x27;Authorization&#x27;, res.body.token)\n                        .send(user)\n                        .end((err, res) =&gt; {\n                            res.should.have.status(200);\n                            res.body.should.have\n                                .property(&#x27;message&#x27;)\n                                .eql(&#x27;User info updated successfully&#x27;);\n                            res.body.should.have\n                                .property(&#x27;modifiedDocs&#x27;)\n                                .eql(1);\n                            done();\n                        });\n                });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5a93e629-21d0-4419-8f76-bd249173ce91&quot;,&quot;parentUUID&quot;:&quot;2faad7b2-9076-40b2-a34e-018a8bd3aed4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT PATCH a user by a wrong id&quot;,&quot;fullTitle&quot;:&quot;Users /PATCH/:id user it should NOT PATCH a user by a wrong id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:207,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n                \&quot;pseudo\&quot;: process.env[\&quot;ADMIN_PSEUDO\&quot;],\n                \&quot;password\&quot;: process.env[\&quot;ADMIN_PSD\&quot;]\n            };\n            chai.request(server)\n                .post(&#x27;/server/api/login&#x27;)\n                .send(user)\n                .end((err, res) =&gt; {\n                    delete user.pseudo;\n                    chai.request(server)\n                        .patch(`/server/api/user/7e7fd1d5f71b123cbc246700`)\n                        .set(&#x27;Authorization&#x27;, res.body.token)\n                        .send(user)\n                        .end((err, res) =&gt; {\n                            res.should.have.status(404);\n                            res.body.should.have\n                                .property(&#x27;message&#x27;)\n                                .eql(&#x27;No valid entry found for provided ID&#x27;);\n                            done();\n                        });\n                });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;021c8cd3-20a7-4b2b-a7db-31bb7edde36a&quot;,&quot;parentUUID&quot;:&quot;2faad7b2-9076-40b2-a34e-018a8bd3aed4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT PATCH a user with a missing or invalid JWT&quot;,&quot;fullTitle&quot;:&quot;Users /PATCH/:id user it should NOT PATCH a user with a missing or invalid JWT&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:100,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n                \&quot;pseudo\&quot;: process.env[\&quot;ADMIN_PSEUDO\&quot;],\n                \&quot;password\&quot;: process.env[\&quot;ADMIN_PSD\&quot;]\n            };\n            chai.request(server)\n                .post(&#x27;/server/api/login&#x27;)\n                .send(user)\n                .end(() =&gt; {\n                    chai.request(server)\n                        .patch(&#x27;/server/api/user/1f468dbf5182002118fc8821&#x27;)\n                        .send(user)\n                        .end((err, res2) =&gt; {\n                            res2.should.have.status(401);\n                            Object.keys(res2.body).length.should.be.eql(0);\n                        });\n                    done();\n                });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4967b1c4-cb76-44ca-99f1-887f422f271b&quot;,&quot;parentUUID&quot;:&quot;2faad7b2-9076-40b2-a34e-018a8bd3aed4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should check that a student can&#x27;t update another student&#x27;s profile&quot;,&quot;fullTitle&quot;:&quot;Users /PATCH/:id user it should check that a student can&#x27;t update another student&#x27;s profile&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:300,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = Math.random().toString(36).substr(2, 4);\n            const user0 = Math.random().toString(36).substr(2, 4);\n            const user1 = {\n                \&quot;username\&quot;: user,\n                \&quot;email\&quot;: `${user}@gmail.com`,\n                \&quot;password\&quot;: \&quot;toto\&quot;\n            };\n            const user2 = {\n                \&quot;username\&quot;: user0,\n                \&quot;email\&quot;: `${user0}@gmail.com`,\n                \&quot;password\&quot;: \&quot;toto\&quot;\n            };\n            chai.request(server)\n                .post(&#x27;/server/api/signup&#x27;)\n                .send(user1)\n                .end(() =&gt; {\n                    chai.request(server)\n                        .post(&#x27;/server/api/signup&#x27;)\n                        .send(user2)\n                        .end((err, res2) =&gt; {\n                            chai.request(server)\n                                .post(&#x27;/server/api/login&#x27;)\n                                .send({\n                                    \&quot;pseudo\&quot;: user,\n                                    \&quot;password\&quot;: \&quot;toto\&quot;\n                                })\n                                .end((err, res3) =&gt; {\n                                    chai.request(server)\n                                        .patch(`/server/api/user/${res2.body.user.userId}`)\n                                        .set(&#x27;Authorization&#x27;, res3.body.token)\n                                        .end((err, res3) =&gt; {\n                                            res3.should.have.status(403);\n                                            res3.body.should.have\n                                                .property(&#x27;message&#x27;)\n                                                .eql(\&quot;You don&#x27;t have enough permission to perform this action !\&quot;);\n                                            done();\n                                        });\n                                });\n                        });\n                });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a79ca5ca-9f3d-49a1-bd81-ec3a977090a2&quot;,&quot;parentUUID&quot;:&quot;2faad7b2-9076-40b2-a34e-018a8bd3aed4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT PATCH a user if request body contains unallowed fields&quot;,&quot;fullTitle&quot;:&quot;Users /PATCH/:id user it should NOT PATCH a user if request body contains unallowed fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:108,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n                \&quot;pseudo\&quot;: process.env[\&quot;ADMIN_PSEUDO\&quot;],\n                \&quot;password\&quot;: process.env[\&quot;ADMIN_PSD\&quot;]\n            };\n            chai.request(server)\n                .post(&#x27;/server/api/login&#x27;)\n                .send(user)\n                .end((err, res) =&gt; {\n                    user.phone = \&quot;0815713693\&quot;;\n                    chai.request(server)\n                        .patch(`/server/api/user/${process.env.ADMIN_ID}`)\n                        .set(&#x27;Authorization&#x27;, res.body.token)\n                        .send(user)\n                        .end((err, res) =&gt; {\n                            res.should.have.status(405);\n                            res.body.should.have\n                                .property(&#x27;message&#x27;)\n                                .eql(&#x27;Some fields are NOT allowed&#x27;);\n                            done();\n                        });\n                });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ab8d951f-a9d3-4af7-a8e2-778604251f86&quot;,&quot;parentUUID&quot;:&quot;2faad7b2-9076-40b2-a34e-018a8bd3aed4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5a93e629-21d0-4419-8f76-bd249173ce91&quot;,&quot;021c8cd3-20a7-4b2b-a7db-31bb7edde36a&quot;,&quot;4967b1c4-cb76-44ca-99f1-887f422f271b&quot;,&quot;a79ca5ca-9f3d-49a1-bd81-ec3a977090a2&quot;,&quot;ab8d951f-a9d3-4af7-a8e2-778604251f86&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:923,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;522a7c60-efa0-4c98-a182-019029ea2f91&quot;,&quot;title&quot;:&quot;/DELETE/:id user&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\morga\\Documents\\mean-stack-web-app\\server-side\\tests\\users..js&quot;,&quot;file&quot;:&quot;\\server-side\\tests\\users..js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should DELETE a user by id&quot;,&quot;fullTitle&quot;:&quot;Users /DELETE/:id user it should DELETE a user by id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:204,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = Math.random().toString(36).substr(2, 4);\n            const user1 = {\n                \&quot;username\&quot;: user,\n                \&quot;email\&quot;: `${user}@gmail.com`,\n                \&quot;password\&quot;: \&quot;toto\&quot;\n            };\n            chai.request(server)\n                .post(&#x27;/server/api/signup&#x27;)\n                .send(user1)\n                .end(() =&gt; {\n                    chai.request(server)\n                        .post(&#x27;/server/api/login&#x27;)\n                        .send({\n                            \&quot;pseudo\&quot;: user,\n                            \&quot;password\&quot;: \&quot;toto\&quot;\n                        })\n                        .end((err, res1) =&gt; {\n                            chai.request(server)\n                                .delete(`/server/api/user/${res1.body.user.userId}`)\n                                .set(&#x27;Authorization&#x27;, res1.body.token)\n                                .end((err, res2) =&gt; {\n                                    res2.should.have.status(200);\n                                    res2.body.should.have\n                                        .property(&#x27;message&#x27;)\n                                        .eql(&#x27;User deleted successfully !&#x27;);\n                                    done();\n                                });\n                        });\n                });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;39b15ec8-d10e-4984-9757-a43131735931&quot;,&quot;parentUUID&quot;:&quot;522a7c60-efa0-4c98-a182-019029ea2f91&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT DELETE a user by a wrong id&quot;,&quot;fullTitle&quot;:&quot;Users /DELETE/:id user it should NOT DELETE a user by a wrong id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:115,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n                \&quot;pseudo\&quot;: process.env[\&quot;ADMIN_PSEUDO\&quot;],\n                \&quot;password\&quot;: process.env[\&quot;ADMIN_PSD\&quot;]\n            };\n            chai.request(server)\n                .post(&#x27;/server/api/login&#x27;)\n                .send(user)\n                .end((err, res) =&gt; {\n                    chai.request(server)\n                        .delete(`/server/api/user/7e7fd1d5f71b123cbc246700`)\n                        .set(&#x27;Authorization&#x27;, res.body.token)\n                        .end((err, res) =&gt; {\n                            res.should.have.status(404);\n                            res.body.should.have\n                                .property(&#x27;message&#x27;)\n                                .eql(&#x27;No user found for the provided ID&#x27;);\n                            done();\n                        });\n                });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;39ca11f2-77b2-4582-a8a5-2ee2b4e1cbd4&quot;,&quot;parentUUID&quot;:&quot;522a7c60-efa0-4c98-a182-019029ea2f91&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT DELETE a user with a missing or invalid JWT&quot;,&quot;fullTitle&quot;:&quot;Users /DELETE/:id user it should NOT DELETE a user with a missing or invalid JWT&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:100,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n                \&quot;pseudo\&quot;: process.env[\&quot;ADMIN_PSEUDO\&quot;],\n                \&quot;password\&quot;: process.env[\&quot;ADMIN_PSD\&quot;]\n            };\n            chai.request(server)\n                .post(&#x27;/server/api/login&#x27;)\n                .send(user)\n                .end(() =&gt; {\n                    chai.request(server)\n                        .delete(&#x27;/server/api/user/1f468dbf5182002118fc8821&#x27;)\n                        .end((err, res2) =&gt; {\n                            res2.should.have.status(401);\n                            Object.keys(res2.body).length.should.be.eql(0);\n                        });\n                    done();\n                });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;98a88528-4c64-48ab-9da0-b40297b818fe&quot;,&quot;parentUUID&quot;:&quot;522a7c60-efa0-4c98-a182-019029ea2f91&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should check that a student can&#x27;t update another student&#x27;s profile&quot;,&quot;fullTitle&quot;:&quot;Users /DELETE/:id user it should check that a student can&#x27;t update another student&#x27;s profile&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:99,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = Math.random().toString(36).substr(2, 4);\n            const user0 = Math.random().toString(36).substr(2, 4);\n            const user1 = {\n                \&quot;username\&quot;: user,\n                \&quot;email\&quot;: `${user}@gmail.com`,\n                \&quot;password\&quot;: \&quot;toto\&quot;\n            };\n            const user2 = {\n                \&quot;username\&quot;: user0,\n                \&quot;email\&quot;: `${user0}@gmail.com`,\n                \&quot;password\&quot;: \&quot;toto\&quot;\n            };\n            chai.request(server)\n                .post(&#x27;/server/api/signup&#x27;)\n                .send(user1)\n                .end(() =&gt; {\n                    chai.request(server)\n                        .post(&#x27;/server/api/signup&#x27;)\n                        .send(user2)\n                        .end((err, res2) =&gt; {\n                            chai.request(server)\n                                .post(&#x27;/server/api/login&#x27;)\n                                .send({\n                                    \&quot;pseudo\&quot;: user,\n                                    \&quot;password\&quot;: \&quot;toto\&quot;\n                                })\n                                .end((err, res3) =&gt; {\n                                    chai.request(server)\n                                        .delete(`/server/api/user/${res2.body.user.userId}`)\n                                        .set(&#x27;Authorization&#x27;, res3.body.token)\n                                        .end((err, res3) =&gt; {\n                                            res3.should.have.status(403);\n                                            res3.body.should.have\n                                                .property(&#x27;message&#x27;)\n                                                .eql(\&quot;You don&#x27;t have enough permission to perform this action !\&quot;);\n                                        });\n                                });\n                        });\n                    done();\n                });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;37d06001-22b0-4aaf-a444-5df1b4333d72&quot;,&quot;parentUUID&quot;:&quot;522a7c60-efa0-4c98-a182-019029ea2f91&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;39b15ec8-d10e-4984-9757-a43131735931&quot;,&quot;39ca11f2-77b2-4582-a8a5-2ee2b4e1cbd4&quot;,&quot;98a88528-4c64-48ab-9da0-b40297b818fe&quot;,&quot;37d06001-22b0-4aaf-a444-5df1b4333d72&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:518,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000},{&quot;uuid&quot;:&quot;d406a757-db60-4f31-9821-cb7b29fb6018&quot;,&quot;title&quot;:&quot;/PATCH/:id/score&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\morga\\Documents\\mean-stack-web-app\\server-side\\tests\\users..js&quot;,&quot;file&quot;:&quot;\\server-side\\tests\\users..js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should PATCH the user&#x27;s score &quot;,&quot;fullTitle&quot;:&quot;Users /PATCH/:id/score it should PATCH the user&#x27;s score &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:114,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n                \&quot;pseudo\&quot;: process.env[\&quot;ADMIN_PSEUDO\&quot;],\n                \&quot;password\&quot;: process.env[\&quot;ADMIN_PSD\&quot;]\n            };\n            chai.request(server)\n                .post(&#x27;/server/api/login&#x27;)\n                .send(user)\n                .end((err, res1) =&gt; {\n                    chai.request(server)\n                        .patch(`/server/api/user/${res1.body.user.userId}/score`)\n                        .send({ \&quot;score\&quot; : 10})\n                        .set(&#x27;Authorization&#x27;, res1.body.token)\n                        .end((err, res2) =&gt; {\n                            res2.should.have.status(200);\n                            res2.body.should.have\n                                .property(&#x27;message&#x27;)\n                                .eql(&#x27;User info updated successfully&#x27;);\n                        });\n                    done();\n                });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d0514a03-c474-4582-aff1-e3bac0e85aaf&quot;,&quot;parentUUID&quot;:&quot;d406a757-db60-4f31-9821-cb7b29fb6018&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should NOT PATCH the user&#x27;s score if it exceeds 10&quot;,&quot;fullTitle&quot;:&quot;Users /PATCH/:id/score it should NOT PATCH the user&#x27;s score if it exceeds 10&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:103,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n                \&quot;pseudo\&quot;: process.env[\&quot;ADMIN_PSEUDO\&quot;],\n                \&quot;password\&quot;: process.env[\&quot;ADMIN_PSD\&quot;]\n            };\n            chai.request(server)\n                .post(&#x27;/server/api/login&#x27;)\n                .send(user)\n                .end((err, res1) =&gt; {\n                    chai.request(server)\n                        .patch(`/server/api/user/${res1.body.user.userId}/score`)\n                        .send({ \&quot;score\&quot; : 123})\n                        .set(&#x27;Authorization&#x27;, res1.body.token)\n                        .end((err, res2) =&gt; {\n                            res2.should.have.status(405);\n                            res2.body.should.have\n                                .property(&#x27;message&#x27;)\n                                .eql(&#x27;The max score is 10&#x27;);\n                        });\n                    done();\n                });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;36585583-d738-4e92-9312-b863df096418&quot;,&quot;parentUUID&quot;:&quot;d406a757-db60-4f31-9821-cb7b29fb6018&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d0514a03-c474-4582-aff1-e3bac0e85aaf&quot;,&quot;36585583-d738-4e92-9312-b863df096418&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:217,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:30000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;7.1.2&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;index&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;6.1.1&quot;},&quot;marge&quot;:{&quot;options&quot;:{&quot;reportDir&quot;:&quot;report-mocha&quot;,&quot;reportFilename&quot;:&quot;index&quot;},&quot;version&quot;:&quot;5.1.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;index&quot;,&quot;reportDir&quot;:&quot;report-mocha&quot;,&quot;reportTitle&quot;:&quot;mean-stack-web-app&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;report-mocha\\assets&quot;,&quot;jsonFile&quot;:&quot;C:\\Users\\morga\\Documents\\mean-stack-web-app\\report-mocha\\index.json&quot;,&quot;htmlFile&quot;:&quot;C:\\Users\\morga\\Documents\\mean-stack-web-app\\report-mocha\\index.html&quot;}"><div id="report"></div><script src="assets\app.js"></script></body></html>